{"name":"LLM_ParserAgent","nodes":[{"parameters":{"httpMethod":"POST","path":"parse_command","responseMode":"lastNode"},"name":"Webhook","type":"n8n-nodes-base.webhook","typeVersion":1,"position":[200,300]},{"parameters":{"url":"http://openrouter-proxy.localhost/v1/chat/completions","method":"POST","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"Bearer sk-dummy"}]},"sendBody":true,"jsonParameters":true,"bodyParametersJson":"={"model":"mistral-7b-instruct","temperature":0.3,"messages":[{"role":"system","content":"You are an intent classifier. Classify incoming commands into one of: freqtrade, freqai, research, utility. Also extract intent like backtest, notify, or summarize."},{"role":"user","content": $json.message }]}"},"name":"Call OpenRouter","type":"n8n-nodes-base.httpRequest","typeVersion":1,"position":[400,300]},{"parameters":{"operation":"insert","table":"agent_logs","columns":["agent","workflow","action","status","details"],"values":[["LLM_ParserAgent","LLM_ParserAgent","parse","success","={{ $json }}"]]},"name":"Log Parse","type":"n8n-nodes-base.postgres","typeVersion":1,"position":[600,300],"credentials":{"postgres":{"id":"REPLACE_WITH_PG_CREDS"}}},{"parameters":{"values":{"string":[{"name":"category","value":"={{ JSON.parse($node["Call OpenRouter"].json.choices[0].message.content).category || 'unknown' }}"},{"name":"intent","value":"={{ JSON.parse($node["Call OpenRouter"].json.choices[0].message.content).intent || '' }}"},{"name":"confidence","value":"={{ JSON.parse($node["Call OpenRouter"].json.choices[0].message.content).confidence || 0.0 }}"},{"name":"entities","value":"={{ JSON.stringify(JSON.parse($node["Call OpenRouter"].json.choices[0].message.content).entities || {}) }}"}]},"options":{}},"name":"Format Result","type":"n8n-nodes-base.set","typeVersion":1,"position":[800,300]}],"connections":{"Webhook":{"main":[[{"node":"Call OpenRouter","type":"main","index":0}]]},"Call OpenRouter":{"main":[[{"node":"Log Parse","type":"main","index":0}]]},"Log Parse":{"main":[[{"node":"Format Result","type":"main","index":0}]]}}